//
//  AddFamilyViewController.m
//  eHealthCare
//
//  Created by John shi on 2018/10/16.
//  Copyright © 2018年 Jon Shi. All rights reserved.
//

#import "AddFamilyViewController.h"
#import "AddFamilyCollectionReusableView.h"
#import "AddFamilyCollectionViewCell.h"
#import "PersonArchiveTextPutView.h"
#import "AddFamilyDetailController.h"
@interface AddFamilyViewController ()
@property (nonatomic, strong) UICollectionView *collectionView;
@property(strong,nonatomic) PersonArchiveTextPutView *popView;
@property (nonatomic, strong)UICollectionViewFlowLayout *customLayout;
@end

@implementation AddFamilyViewController
// 注意const的位置
static NSString *const collectionCellId = @"cellId";
static NSString *const collectionfooterId = @"AddFamilyCollectionReusableView";


- (void)viewDidLoad {
    [super viewDidLoad];
     self.myTitle = @"添加家人";
    [self.leftBtn setImage:[UIImage imageNamed:@"icon_back"] forState:UIControlStateNormal];
     self.titleLab.textColor = [UIColor getColor:@"2C4667"];
    self.view.backgroundColor = [UIColor getColor:@"EFF8FE"];
     self.headerView.backgroundColor = [UIColor whiteColor];
    [self loadCollectionView];
}
- (void)loadCollectionView
{// UICollectionViewFlowLayout *flow = [[UICollectionViewFlowLayout alloc] init];
    _customLayout = [[UICollectionViewFlowLayout alloc] init]; // 自定义的布局对象
    _customLayout.itemSize = CGSizeMake(((KScreenWidth-30)-25-10)/3, 50);
    _customLayout.minimumLineSpacing = 10;
    _customLayout.minimumInteritemSpacing = 10;
    _customLayout.footerReferenceSize = CGSizeMake((KScreenWidth-50), 60);
  
    _customLayout.scrollDirection = UICollectionViewScrollDirectionVertical;
    _collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(15, PublicY, KScreenWidth-30, CGRectGetHeight(self.view.frame)-(PublicY)) collectionViewLayout:_customLayout];
    _collectionView.backgroundColor = [UIColor getColor:@"EFF8FE"];
    _collectionView.dataSource = self;
    _collectionView.delegate = self;
    [self.view addSubview:_collectionView];
    _collectionView.showsHorizontalScrollIndicator=NO;
    _collectionView.showsVerticalScrollIndicator=NO;
    // 注册cell、sectionHeader、sectionFooter
    [_collectionView registerNib:[UINib nibWithNibName:@"AddFamilyCollectionViewCell" bundle:nil]  forCellWithReuseIdentifier:collectionCellId];
  
    [_collectionView registerNib:[UINib nibWithNibName:@"AddFamilyCollectionReusableView" bundle:nil]  forSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:collectionfooterId];
    

}
#pragma mark ---- UICollectionViewDataSource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}


- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 15;
}


- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    AddFamilyCollectionViewCell *cell = [_collectionView dequeueReusableCellWithReuseIdentifier:collectionCellId forIndexPath:indexPath];
    return cell;
}
- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
    return UIEdgeInsetsMake(10, 5, 10, 5);
}
- (UICollectionReusableView*)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {
    if ([kind isEqualToString:UICollectionElementKindSectionHeader]) {

        return nil;
    } else if ([kind isEqualToString:UICollectionElementKindSectionFooter]) {
        AddFamilyCollectionReusableView *footerView = [collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:collectionfooterId forIndexPath:indexPath];
        footerView.delegate = self;
        return footerView;
    } else {
        return [[UICollectionReusableView alloc]init];
    }
}
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
   
    AddFamilyDetailController *add = [[AddFamilyDetailController alloc]initWithType:pageTypeNormal];
    [self.navigationController pushViewController:add animated:YES];
    
}
-(void)creatUI
{
    //5s:300 6:330
    self.popView = [[[NSBundle mainBundle]loadNibNamed:@"PersonArchiveTextPutView" owner:self options:nil]  firstObject];
    self.popView.left = 0;
    self.popView.top=0;
    self.popView.width=KScreenWidth;
    self.popView.height=KScreenHeight;
    //    self.popBottomView.delegate = self;
    [UIView animateWithDuration:.2 animations:^{
        self.popView.transform = CGAffineTransformConcat(CGAffineTransformIdentity,
                                                               CGAffineTransformMakeScale(1.0f, 1.0f));
    }];
    [[UIApplication sharedApplication].keyWindow addSubview:self.popView];
    //    [self.view addSubview:self.popBottomView];
    
}

#pragma mark   自定义
-(void)CustomActionTools;
{
    [self creatUI];
    
}
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end

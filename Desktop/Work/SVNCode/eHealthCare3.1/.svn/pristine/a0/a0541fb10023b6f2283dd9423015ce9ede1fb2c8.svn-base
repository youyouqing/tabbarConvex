//
//  GoHealthTaskController.m
//  eHealthCare
//
//  Created by John shi on 2018/11/12.
//  Copyright Â© 2018 Jon Shi. All rights reserved.
//

#import "GoHealthTaskController.h"
#import "XKHealthIntegralTaskCell.h"
//#import "XKHealthIntegralTaskListModel.h"
@interface GoHealthTaskController ()
/**
 ä¿å­˜æ•°æ®å®ä½“
 */
//@property (nonatomic,strong) XKHealthIntegralTaskListModel *taskListModel;
@property (strong, nonatomic)  UITableView *tableView;
@end

@implementation GoHealthTaskController
-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    self.navigationController.navigationBar.hidden = YES;
    [self loadTaskData];//è§†å›¾å°†è¦å‡ºç°çš„æ—¶å€™åˆ·æ–°æ•°æ®
}
- (void)viewDidLoad {
    [super viewDidLoad];
    [self.view addSubview:self.tableView];
    [self.tableView registerNib:[UINib nibWithNibName:@"XKHealthIntegralTaskCell" bundle:nil] forCellReuseIdentifier:@"cell"];
    
}
-(UITableView *)tableView
{
    
    if (!_tableView) {
        _tableView= [[UITableView alloc]initWithFrame:CGRectMake(0, PublicY, KScreenWidth, KScreenHeight-(PublicY)) style:UITableViewStylePlain];
        _tableView.delegate = self;
        _tableView.dataSource = self;
        _tableView.backgroundColor=[UIColor getColor:@"f2f2f2"];
         _tableView.separatorColor = [UIColor clearColor];
    }
    return _tableView;
    
}
/**
 åŠ è½½ä»»åŠ¡åˆ—è¡¨çš„æ–¹æ³•
 */
-(void)loadTaskData{
    [[XKLoadingView shareLoadingView] showLoadingText:@"åŠªåŠ›åŠ è½½ä¸­"];
    //è·å–é¦–é¡µå¥åº·è®¡åˆ’ã€çƒ­é—¨è¯é¢˜æ•°æ®
    [ProtosomaticHttpTool protosomaticPostWithURLString:@"939" parameters:@{@"Token":[UserInfoTool getLoginInfo].Token,@"MemberId":@([UserInfoTool getLoginInfo].MemberID)} success:^(id json) {
        
        NSLog(@"è·å–å½“æ—¥ä»»åŠ¡è¯¦æƒ…ä¿¡æ¯939--:%@",json);
        if ([json[@"Basis"][@"Msg"] isEqualToString:@"æ“ä½œæˆåŠŸ"]) {
            //å¹¿å‘Šä¿¡æ¯
            [[XKLoadingView shareLoadingView] hideLoding];
//            //æ•°æ®è½¬åŒ–å¹¶åˆ·æ–°åˆ—è¡¨
//            self.taskListModel = [XKHealthIntegralTaskListModel objectWithKeyValues:json[@"Result"]];
//            self.taskHead.listModel = self.taskListModel;
//            NSLog(@"%li---%li",self.taskListModel.DailyQuestList.count,self.taskListModel.WelfareTaskList.count);
            [self.tableView reloadData];
            
        }else{
            [[XKLoadingView shareLoadingView] errorloadingText:[[json objectForKey:@"Basis"] objectForKey:@"Msg"]];
        }
    } failure:^(id error) {
        NSLog(@"%@",error);
        [[XKLoadingView shareLoadingView] errorloadingText:@"åŠ è½½å¤±è´¥"];
    }];
}
#pragma mark - Table view data source è¿”å›å¤šå°‘ç»„
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
}

/**
 æ¯ä¸ªç»„æœ‰å¤šå°‘ä¸ªcell
 */
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0) {
        return 3;
    }
//    if (section == 1) {
//        return self.taskListModel.WelfareTaskList.count;
//    }
    return 0;
}

/**
 æ¯ä¸ªcellè®¾ç½®
 */
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    
    XKHealthIntegralTaskCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell" forIndexPath:indexPath];
    cell.botommCons.constant = 10;
//    if (indexPath.section == 0) {//åˆ¤æ–­æ˜¯ç¦åˆ©ä»»åŠ¡è¿˜æ˜¯æ¯æ—¥ä»»åŠ¡â€˜
//        if (indexPath.row == self.taskListModel.DailyQuestList.count-1) {
//            cell.botommCons.constant = 0;
//        }
//        cell.dailyModel = self.taskListModel.DailyQuestList[indexPath.row];
//    }
//
//    if (indexPath.section == 1) {
//
//        if (indexPath.row == self.taskListModel.WelfareTaskList.count-1) {
//            cell.botommCons.constant = 0;
//        }
//        cell.planModel = self.taskListModel.WelfareTaskList[indexPath.row];
//
//    }
    
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    
    return cell;
}


/**
 æ ¹æ®   æ¯æ—¥ä»»åŠ¡ç±»å‹ï¼ˆ1ã€ç­¾åˆ°ä»»åŠ¡ 2ã€æµ‹é‡ä»»åŠ¡ 3ã€èˆ’ç¼“å¿ƒæƒ…ä»»åŠ¡ 4ã€å¥åº·è®¡åˆ’ä»»åŠ¡ 5ã€å¥åº·å°å·¥å…·ä»»åŠ¡ 6ã€å…»ç”Ÿå°çŸ¥è¯†ä»»åŠ¡ 7ã€è¿åŠ¨ä»»åŠ¡ï¼‰
 ç¦åˆ©ä»»åŠ¡ç±»å‹ï¼ˆ1ã€å®Œå–„ä¸ªäººæ¡£æ¡ˆ 2ã€å®Œå–„å®¶åº­æˆå‘˜æ¡£æ¡ˆ3ã€æ£€æµ‹æŠ¥å‘Š4ã€é¢„çº¦å¥åº·ä½“æ£€ 5ã€åˆ†äº«é˜…è¯» 6ã€å…³è”è®¾å¤‡ 7ã€è´­ä¹°å•†å“ 8ã€è¯„è®ºå¥åº·èµ„è®¯ï¼‰
 */
//-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
//{
//    /**
//     Int32
//     æ¯æ—¥ä»»åŠ¡ç±»å‹ï¼ˆ1ã€ç­¾åˆ°ä»»åŠ¡ 2ã€æµ‹é‡ä»»åŠ¡ 3ã€èˆ’ç¼“å¿ƒæƒ…ä»»åŠ¡ 4ã€å¥åº·è®¡åˆ’ä»»åŠ¡ 5ã€å¥åº·å°å·¥å…·ä»»åŠ¡ 6ã€å…»ç”Ÿå°çŸ¥è¯†ä»»åŠ¡ 7ã€è¿åŠ¨ä»»åŠ¡8è§†åŠ›9æŸ”éŸ§åº¦10æ‹³å¤´å¨åŠ› 11è‰²å½©æ„Ÿè§‰ï¼‰
//     */
//    if (indexPath.section == 0) {//åˆ¤æ–­æ˜¯ç¦åˆ©ä»»åŠ¡è¿˜æ˜¯æ¯æ—¥ä»»åŠ¡
//
//        XKHealthIntergralDailyQuestListModel *dailyTask = self.taskListModel.DailyQuestList[indexPath.row];
//        if (dailyTask.Iscomplete == 1) {//å·²å®Œæˆ
//            //            [SVProgressHUD showSuccessWithStatus:@"è¯¥ä»»åŠ¡å·²å®Œæˆ"];
//            return;
//        }
//        switch (dailyTask.TaskTypeID) {
//            case 1:
//            {
//                [self popTaskView:dailyTask];
//            }
//                break;
//            case 2:
//            {
//                HouseholdCheckHomeController *dect = [[HouseholdCheckHomeController alloc]init];
//                //                dect.style = XKDetectBloodPressureStyle;
//                [self.navigationController pushViewController:dect animated:YES];
//            }
//                break;
//            case 3:
//            {
//                /* å¥åº·+ã€‹å¼€å§‹æ·±å‘¼å¸é‡Œè¦åˆ¤æ–­å½“å¤©æ˜¯å¦æœ‰è¿™ä¸ªä»»åŠ¡ï¼Œå¦‚æœæœ‰æ‰è°ƒç”¨ä»»åŠ¡æ¥å£ï¼Œæ²¡æœ‰åˆ™ä¸è°ƒç”¨*/
//                XKRespiratoryTrainDetailVC *resp = [[XKRespiratoryTrainDetailVC alloc] init];
//
//                [self.navigationController pushViewController:resp animated:YES];
//            }
//                break;
//            case 4:
//            {
//                XKPlanViewController *plan = [[XKPlanViewController alloc]init];
//                [self.navigationController pushViewController:plan animated:YES];
//            }
//                break;
//            case 5:
//            {
//                CheckController *check = [[CheckController alloc] init];
//                [self.navigationController pushViewController:check animated:YES];
//            }
//                break;
//            case 6://è·³è½¬åˆ°å¥åº·èµ„è®¯æŸ¥çœ‹è¯¦æƒ…é¡µ
//            {
//                //å±•ç¤ºå½“å¤©ä»»åŠ¡æ˜¯å¦å®Œæˆ
//                XKInfomationViewController *ph = [[XKInfomationViewController alloc] init];
//                [self.navigationController pushViewController:ph animated:YES];
//            }
//                break;
//            case 7:
//            {
//                XKSportsHomeController *sport = [[XKSportsHomeController alloc]init];
//                [self.navigationController pushViewController:sport animated:YES];
//
//            }
//                break;
//            case 8:
//            {
//                /**
//                 è§†åŠ›æµ‹è¯•
//                 */
//                EyeTestViewController *eyeTest = [[EyeTestViewController alloc] init];
//                [self.navigationController pushViewController:eyeTest animated:YES];
//            }
//                break;
//            case 9:
//            {
//                /**
//                 æŸ”éŸ§åº¦æµ‹è¯•
//                 */
//                LigamentController *touch = [[LigamentController alloc] init];
//                [self.navigationController pushViewController:touch animated:YES];
//
//            }
//                break;
//            case 10:
//            {
//                /**
//                 æŒ¥æ‹³æµ‹è¯•
//                 */
//                ShakeFistController *fist = [[ShakeFistController alloc] init];
//                [self.navigationController pushViewController:fist animated:YES];
//
//            }
//                break;
//            case 11:
//            {
//                /**
//                 è‰²è§‰æµ‹è¯•
//                 */
//                NSLog(@"è‰²è§‰æµ‹è¯•");
//                ColourSenseController *sense = [[ColourSenseController alloc] init];
//                [self.navigationController pushViewController:sense animated:YES];
//
//            }
//                break;
//            case 12://12å¯¹åº”å®‰é™è°ƒèŠ‚
//            {
//                /**
//                 åŠ è½½æ­£å¿µã€æ—©å®‰ã€æ™šå®‰æ•°æ®ã€
//                 */
//                [[XKLoadingView shareLoadingView] showLoadingText:@"åŠªåŠ›åŠ è½½ä¸­"];
//                [ProtosomaticHttpTool protosomaticPostWithURLString:@"962" parameters:@{@"Token":[UserInfoTool getLoginInfo].Token,@"MemberId":@([UserInfoTool getLoginInfo].MemberID)} success:^(id json) {
//
//                    NSLog(@"è·å–åŠ è½½å¥åº·+æ•°æ®962--:%@",json);
//                    if ([json[@"Basis"][@"Msg"] isEqualToString:@"æ“ä½œæˆåŠŸ"]) {
//                        //å¹¿å‘Šä¿¡æ¯
//                        [[XKLoadingView shareLoadingView] hideLoding];
//                        NSArray *array = [XKTrainingModel objectArrayWithKeyValuesArray:json[@"Result"]];
//
//
//                        NSMutableArray *mindFulnessArr = [NSMutableArray arrayWithCapacity:0];
//
//                        for (NSInteger i=0; i<array.count; i++) {
//                            XKTrainingModel *model = array[i];
//                            if (model.EaseType == 3 && model.MindfulnessType == 1) {//å®‰é™è«æƒ³
//                                [mindFulnessArr addObject:model];
//
//                            }
//                        }
//                        XKMusicViewController *pluse = [[XKMusicViewController alloc]init];
//                        //                                pluse.model = model;
//
//                        pluse.musicArray = mindFulnessArr;
//                        [self.navigationController pushViewController:pluse animated:YES];
//                    }else{
//                        [[XKLoadingView shareLoadingView] errorloadingText:[[json objectForKey:@"Basis"] objectForKey:@"Msg"]];
//                    }
//                } failure:^(id error) {
//                    NSLog(@"%@",error);
//                    [[XKLoadingView shareLoadingView] errorloadingText:@"åŠ è½½å¤±è´¥"];
//                }];
//
//            }
//                break;
//            case 13://13å¯¹åº”ç¼“è§£å‹åŠ›
//            {
//                /**
//                 åŠ è½½æ­£å¿µã€æ—©å®‰ã€æ™šå®‰æ•°æ®ã€
//                 */
//                [[XKLoadingView shareLoadingView] showLoadingText:@"åŠªåŠ›åŠ è½½ä¸­"];
//                [ProtosomaticHttpTool protosomaticPostWithURLString:@"962" parameters:@{@"Token":[UserInfoTool getLoginInfo].Token,@"MemberId":@([UserInfoTool getLoginInfo].MemberID)} success:^(id json) {
//
//                    NSLog(@"è·å–åŠ è½½å¥åº·+æ•°æ®962--:%@",json);
//                    if ([json[@"Basis"][@"Msg"] isEqualToString:@"æ“ä½œæˆåŠŸ"]) {
//                        //å¹¿å‘Šä¿¡æ¯
//                        [[XKLoadingView shareLoadingView] hideLoding];
//                        NSArray *array = [XKTrainingModel objectArrayWithKeyValuesArray:json[@"Result"]];
//
//                        NSMutableArray *mindFulnessArr = [NSMutableArray arrayWithCapacity:0];
//
//                        for (NSInteger i=0; i<array.count; i++) {
//                            XKTrainingModel *model = array[i];
//                            if (model.EaseType == 3 && model.MindfulnessType == 2) {//ç¼“è§£å‹åŠ›
//                                [mindFulnessArr addObject:model];
//
//                            }
//                        }
//                        XKMusicViewController *pluse = [[XKMusicViewController alloc]init];
//                        //                                pluse.model = model;
//
//                        pluse.musicArray = mindFulnessArr;
//                        [self.navigationController pushViewController:pluse animated:YES];
//                    }else{
//                        [[XKLoadingView shareLoadingView] errorloadingText:[[json objectForKey:@"Basis"] objectForKey:@"Msg"]];
//                    }
//                } failure:^(id error) {
//                    NSLog(@"%@",error);
//                    [[XKLoadingView shareLoadingView] errorloadingText:@"åŠ è½½å¤±è´¥"];
//                }];
//
//            }
//                break;
//            case 14://14å¯¹åº”æ­£å¿µè®­ç»ƒ
//            {
//                /**
//                 åŠ è½½æ­£å¿µã€æ—©å®‰ã€æ™šå®‰æ•°æ®ã€
//                 */
//                [[XKLoadingView shareLoadingView] showLoadingText:@"åŠªåŠ›åŠ è½½ä¸­"];
//                [ProtosomaticHttpTool protosomaticPostWithURLString:@"962" parameters:@{@"Token":[UserInfoTool getLoginInfo].Token,@"MemberId":@([UserInfoTool getLoginInfo].MemberID)} success:^(id json) {
//
//                    NSLog(@"è·å–åŠ è½½å¥åº·+æ•°æ®962--:%@",json);
//                    if ([json[@"Basis"][@"Msg"] isEqualToString:@"æ“ä½œæˆåŠŸ"]) {
//                        //å¹¿å‘Šä¿¡æ¯
//                        [[XKLoadingView shareLoadingView] hideLoding];
//                        NSArray *array = [XKTrainingModel objectArrayWithKeyValuesArray:json[@"Result"]];
//                        //                        for (NSInteger i=0; i<array.count; i++) {
//                        //                            XKTrainingModel *model = array[i];
//                        //                            if (model.EaseType == 3 && model.MindfulnessType == 3) {//æ­£å¿µè®­ç»ƒ
//                        //                                XKMusicViewController *pluse = [[XKMusicViewController alloc]init];
//                        ////                                  pluse.model = model;
//                        //                                [self.navigationController pushViewController:pluse animated:YES];
//                        //                            }
//                        //                        }
//
//
//                        NSMutableArray *mindFulnessArr = [NSMutableArray arrayWithCapacity:0];
//
//                        for (NSInteger i=0; i<array.count; i++) {
//                            XKTrainingModel *model = array[i];
//                            if (model.EaseType == 3 && model.MindfulnessType == 3) {//æ­£å¿µè®­ç»ƒ
//                                [mindFulnessArr addObject:model];
//
//                            }
//                        }
//                        XKMusicViewController *pluse = [[XKMusicViewController alloc]init];
//                        //                                pluse.model = model;
//
//                        pluse.musicArray = mindFulnessArr;
//                        [self.navigationController pushViewController:pluse animated:YES];
//
//                    }else{
//                        [[XKLoadingView shareLoadingView] errorloadingText:[[json objectForKey:@"Basis"] objectForKey:@"Msg"]];
//                    }
//                } failure:^(id error) {
//                    NSLog(@"%@",error);
//                    [[XKLoadingView shareLoadingView] errorloadingText:@"åŠ è½½å¤±è´¥"];
//                }];
//
//            }
//                break;
//            default:
//                break;
//        }
//
//    }
//
//    /*TaskTypeID
//     Int32
//     ç¦åˆ©ä»»åŠ¡ç±»å‹ï¼ˆ1ã€å®Œå–„ä¸ªäººæ¡£æ¡ˆ 2ã€å®Œå–„å®¶åº­æˆå‘˜æ¡£æ¡ˆ3ã€é¢„çº¦å¥åº·ä½“æ£€(å®¢æˆ·ç«¯æ— ) 4ã€æŸ¥çœ‹æ£€æµ‹æŠ¥å‘Š 5ã€å…³è”è®¾å¤‡ 6ã€è´­ä¹°å•†å“ 7ã€å¥åº·èµ„è®¯è¯„è®ºï¼‰8ã€åˆ†äº«å¥åº·æ ‘
//     */
//    if (indexPath.section == 1) {//ç¦åˆ©ä»»åŠ¡åˆ¤æ–­
//        XKXKHealthIntergralDailyPlanHealthDetailListModel *planModel = self.taskListModel.WelfareTaskList[indexPath.row];
//        if (planModel.Iscomplete == 1) {//å·²å®Œæˆ
//            //            [SVProgressHUD showSuccessWithStatus:@"è¯¥ä»»åŠ¡å·²å®Œæˆ"];
//            return;
//        }
//        switch (planModel.TaskTypeID) {
//            case 1:
//            {
//                ArchiveViewController *archview = [[ArchiveViewController alloc] init];
//                //                archview.isHistoryReport = YES;
//                [self.navigationController pushViewController:archview animated:YES];
//                //                EditArchiveController *edit = [[EditArchiveController alloc] init];
//                //                [self.navigationController pushViewController:archview animated:YES];
//            }
//                break;
//            case 2:
//            {
//                FamilyMemberViewController  *familyVC = [[FamilyMemberViewController alloc]init];
//
//                [self.navigationController pushViewController:familyVC animated:YES];
//            }
//                break;
//            case 3:
//            {
//                AdvertisementController *sement=[[AdvertisementController alloc]init];
//                sement.title = @"å…è´¹ä½“æ£€é¢„çº¦";
//                sement.webUrlStr = XKMedicalAppointmentURL;
//                /**
//                 http://192.168.1.6:8021/ReportOverall/AppointmentPhysicalActive?themeID=1
//                 http://api.xiekang.net/ReportOverall/AppointmentPhysicalActive?themeID=1
//                 */
//                [self.navigationController pushViewController:sement animated:YES];
//                //                ArchiveViewController *archview = [[ArchiveViewController alloc] init];
//                //                [self.navigationController pushViewController:archview animated:YES];
//            }
//                break;
//            case 4:
//            {
//                ArchiveViewController *archview = [[ArchiveViewController alloc] init];
//                archview.isHistoryReport = YES;
//                [self.navigationController pushViewController:archview animated:YES];
//                //                XKHealthyCheck *hCheck = [[XKHealthyCheck alloc] init];
//                //                 [self.navigationController pushViewController:hCheck animated:YES];
//            }
//                break;
//            case 5://å…³è”è®¾å¤‡
//            {
//                HouseholdCheckHomeController *dect = [[HouseholdCheckHomeController alloc]init];
//                //                dect.style = XKDetectBloodPressureStyle;
//                [self.navigationController pushViewController:dect animated:YES];
//                //                XKTopicHomeController *topic = [[XKTopicHomeController alloc] init];
//                //                [self.navigationController pushViewController:topic animated:YES];
//            }
//                break;
//            case 6://è´­ä¹°å•†å“
//            {
//                //                http://192.168.1.6:8026/Mall/Index?Token= ''&OSType=2
//                XKHealthMallHome *sement=[[XKHealthMallHome alloc]init];
//                //                sement.title = @"å•†åŸ";
//                //                sement.webUrlStr = XKTaskListBuyURL;
//                /**
//                 http://192.168.1.6:8021/ReportOverall/AppointmentPhysicalActive?themeID=1
//                 http://api.xiekang.net/ReportOverall/AppointmentPhysicalActive?themeID=1
//                 */
//                sement.isTask = YES;
//                [self.navigationController pushViewController:sement animated:YES];
//                //                HouseholdCheckHomeController *house = [[HouseholdCheckHomeController alloc] init];
//                //
//                //                [self.navigationController pushViewController:house animated:YES];
//                NSLog(@"è°ƒæ•´åˆ°å•†åŸé¡µé¢ ---  å•†åŸé¡µé¢æš‚æ—¶æ²¡å‡º");
//
//            }
//                break;
//            case 7://å¥åº·èµ„è®¯è¯„è®º
//            {
//                XKInfomationViewController *info = [[XKInfomationViewController alloc]init];
//                [self.navigationController pushViewController:info animated:YES];
//            }
//                break;
//            case 8://åˆ†äº«
//            {
//                XKHealthIntegralShardController *shard = [[XKHealthIntegralShardController alloc] init];
//                shard.dataModel = self.taskListModel;
//                [self.navigationController pushViewController:shard animated:YES];
//
//            }
//                break;
//
//            default:
//                break;
//        }
//
//    }
//
//}

/**
 æ¯ä¸ªcellé«˜åº¦è®¾ç½®
 */
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.section == 0) {//åˆ¤æ–­æ˜¯ç¦åˆ©ä»»åŠ¡è¿˜æ˜¯æ¯æ—¥ä»»åŠ¡
//        if (indexPath.row == self.taskListModel.DailyQuestList.count-1) {
            return 90;
//        }
    }
    if (indexPath.section == 1) {
//        if (indexPath.row == self.taskListModel.WelfareTaskList.count-1) {
            return 90;
//        }
    }
    return 100;
}

-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section{
    return nil;
}

-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{
    return 0.05;
}

/**ç­¾åˆ°æˆåŠŸè§†å›¾çš„åè®®æ–¹æ³•*/
-(void)clickToMall{
  
//    XKHealthMallHome *sement=[[XKHealthMallHome alloc]init];
//
//    /**
//     http://192.168.1.6:8021/ReportOverall/AppointmentPhysicalActive?themeID=1
//     http://api.xiekang.net/ReportOverall/AppointmentPhysicalActive?themeID=1
//     */
//    sement.isTask = YES;
//    [self.navigationController pushViewController:sement animated:YES];
}

#pragma mark    å¼¹å‡ºå¼¹çª—ç­¾åˆ°æˆåŠŸ
-(void)popTaskView:(XKHealthIntergralDailyQuestListModel *)md
{
   
//    //åŠ è½½è§†å›¾å¹¶èµ‹å€¼æ•°æ®
//    XKHealthIntegralSignSuccessView *sv = [[[NSBundle mainBundle] loadNibNamed:@"XKHealthIntegralSignSuccessView" owner:self options:nil] firstObject];
//    sv.frame = AppFrame;
//    [[UIApplication sharedApplication].delegate.window addSubview:sv];
//    sv.delegate = self;
//    //å…ˆè°ƒç”¨940 åœ¨è°ƒç”¨942 å®Œæˆé¡µé¢å±•ç¤º
//    [[XKLoadingView shareLoadingView] showLoadingText:@"åŠªåŠ›åŠ è½½ä¸­"];
//    NSDictionary *dict = @{@"Token":[UserInfoTool getLoginInfo].Token,@"TaskType":@(1),@"TypeID":@(md.TaskTypeID),@"MemberID":@([UserInfoTool getLoginInfo].MemberID)};
//    [ProtosomaticHttpTool protosomaticPostWithURLString:@"940" parameters:dict success:^(id json) {
//
//        NSLog(@"940--:%@",json);
//
//        /**ç»™kå€¼åº·å¸labèµ‹å€¼*/
//        sv.kCountLab.text = [NSString stringWithFormat:@"%li",md.KValue];
//        sv.kangCountLab.text = [NSString stringWithFormat:@"%li",md.KCurrency];
//
//        if ([json[@"Basis"][@"Msg"] isEqualToString:@"æ“ä½œæˆåŠŸ"]) {
//            [[XKLoadingView shareLoadingView] hideLoding];
//
//            [[XKLoadingView shareLoadingView] showLoadingText:@"åŠ è½½ä¸­"];
//            NSDictionary *dict = @{@"Token":[UserInfoTool getLoginInfo].Token,@"TopNumber":@(3),@"Days":@(md.Days)};
//            [ProtosomaticHttpTool protosomaticPostWithURLString:@"942" parameters:dict success:^(id json) {
//                NSLog(@"942--:%@",json);
//
//                if ([json[@"Basis"][@"Msg"] isEqualToString:@"æ“ä½œæˆåŠŸ"]) {
//                    [[XKLoadingView shareLoadingView] hideLoding];
//
//                    //ç­¾åˆ°æˆåŠŸä¹‹åé‡æ–°åŠ è½½æ•°æ®
//                    [self loadTaskData];
//
//                    NSArray *array = [XKHealthIntegralSginModel objectArrayWithKeyValuesArray:json[@"Result"][@"ReplyHotProductList"]];
//
//                    XKHealthIntegralSginModel *model1 = array[0];
//                    sv.tomarroyCountLab.text = [NSString stringWithFormat:@" æ˜æ—¥ç­¾åˆ°+%liåº·å¸",[json[@"Result"][@"Integral"] integerValue]];
//                    [sv.signEquipmentImgOne sd_setImageWithURL:[NSURL URLWithString:model1.ImgUrl]];
//                    sv.signEquipmentLabOne.text = model1.ProductName;
//
//                    XKHealthIntegralSginModel *model2 = array[1];
//                    [sv.signEquipmentImgTwo sd_setImageWithURL:[NSURL URLWithString:model2.ImgUrl]];
//                    sv.signEquipmentLabTwo.text = model2.ProductName;
//
//                    XKHealthIntegralSginModel *model3 = array[2];
//                    [sv.signEquipmentImgThree sd_setImageWithURL:[NSURL URLWithString:model3.ImgUrl]];
//                    sv.signEquipmentLabThree.text = model3.ProductName;
//
//                    md.Iscomplete = 1;//è®¾ç½®ä¸ºä»»åŠ¡å®Œæˆ
//                    [self.tableView reloadData];
//
//                    NSLog(@"ç­¾åˆ°æˆåŠŸğŸ˜†ğŸ˜†ğŸ˜†ğŸ˜†ğŸ˜†ğŸ˜†ğŸ˜†ğŸ˜†ğŸ˜†");
//
//                }else{
//                    [[XKLoadingView shareLoadingView] errorloadingText:@"ç­¾åˆ°å¤±è´¥"];
//                }
//            } failure:^(id error) {
//                NSLog(@"%@",error);
//                [[XKLoadingView shareLoadingView] errorloadingText:@"ç­¾åˆ°å¤±è´¥"];
//            }];
//            
//        }else{
//            [[XKLoadingView shareLoadingView] errorloadingText:@"ç­¾åˆ°å¤±è´¥"];
//        }
//    } failure:^(id error) {
//        NSLog(@"%@",error);
//        [[XKLoadingView shareLoadingView] errorloadingText:@"ç­¾åˆ°å¤±è´¥"];
//    }];
    
}
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end

//
//  Health+ViewController.m
//  eHealthCare
//
//  Created by John shi on 2018/7/2.
//  Copyright © 2018年 Jon Shi. All rights reserved.
//

#import "Health+ViewController.h"
#import "CheerYourselfUpViewController.h"
#import "TrainWithMusicViewController.h"
#import "ShareView.h"
#import "EPluseFooterView.h"
#import "EPluseTemperView.h"
#import "EPluseWeightView.h"
#import "EPluseHeaderView.h"
#import "EPluseCell.h"
#import "EPluseSugarView.h"
#import "NewTrendDetailController.h"
#import "SportViewController.h"
#import "HouseholdCheckHomeController.h"
@interface Health_ViewController ()

///早安 晚安 正念等数据
@property (nonatomic, strong) NSArray *DataArray;
@property (strong, nonatomic)  UITableView *tableView;

//@property (strong, nonatomic) EPluseFooterView *headView;
@end

@implementation Health_ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.myTitle = @"健康e加";
    [self createUI];
    NSDictionary *dict1=@{@"img":@"icon_ejia_step",@"remark":@"运动步数（步）",@"viewTag":@"12"};
    NSDictionary *dict2=@{@"img":@"icon_ejia_drink",@"remark":@"喝水记录（ml）",@"viewTag":@"13"};
    NSDictionary *dict3=@{@"img":@"icon_ejia_working",@"remark":@"久坐提醒（h）",@"viewTag":@"12",@"imgw":@"iv_rest",@"remarkw":@"久坐提醒（h）",};
    NSDictionary *dict4=@{@"img":@"iv_rest",@"remark":@"久坐提醒（h）",@"viewTag":@"13"};
    //数组初始化
    self.DataArray = @[dict1,dict2,dict3,dict4];
}
#pragma mark UI
- (void)createUI
{
    
    CGFloat TopY = (PublicY);
 
    if (self.isHealthPluse == NO)
    {
         TopY = 0;
    }else
    {
         TopY = (PublicY);
    }
    self.tableView= [[UITableView alloc]initWithFrame:CGRectMake(0, TopY, KScreenWidth, KScreenHeight-(kTabbarHeight)-TopY) style:UITableViewStylePlain];
    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    self.view.backgroundColor = self.tableView.backgroundColor = [UIColor getColor:@"edf8ff"];
    
    [self.view addSubview:self.tableView];
//    self.tableView.tableHeaderView = self.headView;
    self.tableView.estimatedRowHeight = 110;
    self.tableView.rowHeight = UITableViewAutomaticDimension;
    self.tableView.showsVerticalScrollIndicator=NO;
    self.tableView.showsHorizontalScrollIndicator=NO;
    self.tableView.separatorColor=[UIColor clearColor];
    [self.tableView registerNib:[UINib nibWithNibName:@"EPluseCell" bundle:nil] forCellReuseIdentifier:@"EPluseCell"];
  

}
#pragma mark tableView dataSource
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 6;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0) {
        if (self.isHealthPluse == YES){
            return 3   ;
        }else
        return 0;
    }
    return 0;
    
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.section==0) {
        NSString *cellid = @"EPluseCell";
        EPluseCell *cell = [tableView dequeueReusableCellWithIdentifier:cellid];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.DataDic = self.DataArray[indexPath.row];
        cell.delegate = self;
        return cell;
    }else
    {
        NSString *cellid = @"UITableViewCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellid];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        return cell;
        
    }

    
    
}
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    if (section == 0) {
         return 0.01;
    }else  if (section <=5) {
        return 45+10;
    }
    else
    {
        
        return 0.01;
    }
}
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    
    if (indexPath.section == 0) {
         return 117+10;
    }
    else
        return 0.01;
  
}


-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
    if (section == 1){
        EPluseHeaderView *headV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseHeaderView" owner:self options:nil]  firstObject];
        headV.titleLab.text=@"血压(mmHg)";
        headV.delegate = self;
        return headV;
    }else if (section == 2){
        EPluseHeaderView *headV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseHeaderView" owner:self options:nil]  firstObject];
        headV.titleLab.text=@"体温(℃)";
        headV.delegate = self;
        headV.arrowImg.hidden = NO;
        return headV;
    }
    else if (section == 3){
        EPluseHeaderView *headV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseHeaderView" owner:self options:nil]  firstObject];
        headV.titleLab.text=@"体重(kg)";
        headV.delegate = self;
        return headV;
    }
    else if (section == 4){
        EPluseHeaderView *headV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseHeaderView" owner:self options:nil]  firstObject];
        headV.titleLab.text=@"血糖(mmol/L)";
        headV.delegate = self;
        return headV;
    }
    else if (section == 5) {
        EPluseHeaderView *headV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseHeaderView" owner:self options:nil]  firstObject];
        headV.titleLab.text=@"血脂(mmol/L)";
        headV.delegate = self;
        return headV;
    }
    else {
        UIView *headV=[[UIView alloc]init];
        return headV;
    }
}
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section{
    if (section == 0){
        return 0.01;//UITableViewAutomaticDimension;
    }
    else if (section == 1||section == 4)
    {
        
        return 292;
    }
    else if (section == 5)
    {
        
        return 370;
    }
    else
    {
        return 282;
        
    }
    
}
-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section{
    if (section == 1){
        EPluseSugarView *footerV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseSugarView" owner:self options:nil]  firstObject];
        //        footerV.titleLab.text=@"今日健康记录";
        //
        //        [footerV.editBtn setTitle:@"酷" forState:UIControlStateNormal];
        //        footerV.editBtn.layer.borderWidth = 0;
        //        footerV.delegate = self;
        return footerV;
    }
    else if (section == 3){
        EPluseWeightView *footerV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseWeightView" owner:self options:nil]  firstObject];
        //        footerV.titleLab.text=@"今日健康记录";
        //
        //        [footerV.editBtn setTitle:@"酷" forState:UIControlStateNormal];
        //        footerV.editBtn.layer.borderWidth = 0;
        //        footerV.delegate = self;
        return footerV;
    }
    else if (section == 2){
        EPluseTemperView *footerV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseTemperView" owner:self options:nil]  firstObject];

        return footerV;
    }
    else if (section == 4){
        EPluseSugarView *footerV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseSugarView" owner:self options:nil]  firstObject];
        
        return footerV;
    }
     else if (section == 5){
        EPluseFooterView *footerV=[[[NSBundle mainBundle]loadNibNamed:@"EPluseFooterView" owner:self options:nil]  firstObject];
        //        footerV.titleLab.text=@"今日健康记录";
        //
        //        [footerV.editBtn setTitle:@"酷" forState:UIControlStateNormal];
        //        footerV.editBtn.layer.borderWidth = 0;
        //        footerV.delegate = self;
        return footerV;
    }
    else {
        UIView *headV=[[UIView alloc]init];
        return headV;
    }
    
}
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    
    if (indexPath.section == 0) {
        if (indexPath.row == 0) {
          
        }else if (indexPath.row == 1){
            
            
        }else
        {
            
            
        }
    }
    
}
- (void)buttonClickEPluseHeaderViewAtIndex:(NSString *)url title:(NSString *)title index:(NSInteger)tag;
{
    
//    NewTrendDetailController *trend = [[NewTrendDetailController alloc]initWithType:pageTypeNormal];
//    trend.PhysicalItemID = 32;
//    trend.hidesBottomBarWhenPushed = YES;
//    [self.navigationController pushViewController:trend animated:YES];
    
    
    HouseholdCheckHomeController *house=[[HouseholdCheckHomeController alloc]init];
    
    house.tagLeft = 200;
    house.hidesBottomBarWhenPushed = YES;
    [self.navigationController pushViewController:house animated:YES];
    
}
#pragma mark   EPluseDelegate
- (void)sportEPluseCellbuttonClick;
{
    
    SportViewController *sport = [[SportViewController alloc]initWithType:pageTypeNormal];
    sport.hidesBottomBarWhenPushed = YES;
    [self.navigationController pushViewController:sport animated:YES];
    
}
- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end
